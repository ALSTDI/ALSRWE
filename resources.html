<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.47">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Resources</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="resources_files/libs/clipboard/clipboard.min.js"></script>
<script src="resources_files/libs/quarto-html/quarto.js"></script>
<script src="resources_files/libs/quarto-html/popper.min.js"></script>
<script src="resources_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="resources_files/libs/quarto-html/anchor.min.js"></script>
<link href="resources_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="resources_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="resources_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="resources_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="resources_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


<link rel="stylesheet" href="styles.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#resources" id="toc-resources" class="nav-link active" data-scroll-target="#resources"><span class="header-section-number">1</span> Resources</a></li>
  <li><a href="#table-of-contents" id="toc-table-of-contents" class="nav-link" data-scroll-target="#table-of-contents"><span class="header-section-number">2</span> Table of Contents</a></li>
  <li><a href="#omop-cdm-basic-data-dictionary" id="toc-omop-cdm-basic-data-dictionary" class="nav-link" data-scroll-target="#omop-cdm-basic-data-dictionary"><span class="header-section-number">3</span> OMOP CDM Basic Data Dictionary</a></li>
  <li><a href="#projects-best-suited-for-observational-research-and-ohdsi-network-studies" id="toc-projects-best-suited-for-observational-research-and-ohdsi-network-studies" class="nav-link" data-scroll-target="#projects-best-suited-for-observational-research-and-ohdsi-network-studies"><span class="header-section-number">4</span> Projects Best Suited for Observational Research and OHDSI Network Studies</a></li>
  <li><a href="#this-is-the-exact-same-table-as-in-the-image-above-only-in-markdown" id="toc-this-is-the-exact-same-table-as-in-the-image-above-only-in-markdown" class="nav-link" data-scroll-target="#this-is-the-exact-same-table-as-in-the-image-above-only-in-markdown"><span class="header-section-number">5</span> (This is the exact same table as in the image above only in Markdown)</a>
  <ul class="collapse">
  <li><a href="#analytic-use-cases-and-examples" id="toc-analytic-use-cases-and-examples" class="nav-link" data-scroll-target="#analytic-use-cases-and-examples"><span class="header-section-number">5.1</span> Analytic Use Cases and Examples</a></li>
  <li><a href="#important-paper-about-implementation-of-the-omop-cdm" id="toc-important-paper-about-implementation-of-the-omop-cdm" class="nav-link" data-scroll-target="#important-paper-about-implementation-of-the-omop-cdm"><span class="header-section-number">5.2</span> Important Paper About Implementation of the OMOP CDM!</a></li>
  </ul></li>
  <li><a href="#data-content-ontology" id="toc-data-content-ontology" class="nav-link" data-scroll-target="#data-content-ontology"><span class="header-section-number">6</span> Data Content Ontology</a>
  <ul class="collapse">
  <li><a href="#overview-of-major-clinical-terminologies-and-coding-systems" id="toc-overview-of-major-clinical-terminologies-and-coding-systems" class="nav-link" data-scroll-target="#overview-of-major-clinical-terminologies-and-coding-systems"><span class="header-section-number">6.1</span> Overview of Major Clinical Terminologies and Coding Systems</a>
  <ul class="collapse">
  <li><a href="#snomed-clinical-terms-snomed-ct" id="toc-snomed-clinical-terms-snomed-ct" class="nav-link" data-scroll-target="#snomed-clinical-terms-snomed-ct"><span class="header-section-number">6.1.1</span> SNOMED Clinical Terms (SNOMED CT)</a></li>
  <li><a href="#logical-observation-identifiers-names-and-codes-loinc" id="toc-logical-observation-identifiers-names-and-codes-loinc" class="nav-link" data-scroll-target="#logical-observation-identifiers-names-and-codes-loinc"><span class="header-section-number">6.1.2</span> Logical Observation Identifiers Names and Codes (LOINC)</a></li>
  <li><a href="#rxnorm" id="toc-rxnorm" class="nav-link" data-scroll-target="#rxnorm"><span class="header-section-number">6.1.3</span> RxNorm</a></li>
  <li><a href="#international-classification-of-disease-icd" id="toc-international-classification-of-disease-icd" class="nav-link" data-scroll-target="#international-classification-of-disease-icd"><span class="header-section-number">6.1.4</span> International Classification of Disease (ICD)</a></li>
  <li><a href="#current-procedural-terminology-cpt" id="toc-current-procedural-terminology-cpt" class="nav-link" data-scroll-target="#current-procedural-terminology-cpt"><span class="header-section-number">6.1.5</span> Current Procedural Terminology (CPT)</a></li>
  <li><a href="#human-phenotype-ontology-hpo" id="toc-human-phenotype-ontology-hpo" class="nav-link" data-scroll-target="#human-phenotype-ontology-hpo"><span class="header-section-number">6.1.6</span> Human Phenotype Ontology (HPO)</a></li>
  <li><a href="#unified-medical-language-system-umls" id="toc-unified-medical-language-system-umls" class="nav-link" data-scroll-target="#unified-medical-language-system-umls"><span class="header-section-number">6.1.7</span> Unified Medical Language System (UMLS)</a></li>
  <li><a href="#ontology-mapping-in-bioportal-applications" id="toc-ontology-mapping-in-bioportal-applications" class="nav-link" data-scroll-target="#ontology-mapping-in-bioportal-applications"><span class="header-section-number">6.1.8</span> Ontology Mapping in BioPortal Applications</a></li>
  </ul></li>
  <li><a href="#omop-domains-by-source-to-standard-vocabulary" id="toc-omop-domains-by-source-to-standard-vocabulary" class="nav-link" data-scroll-target="#omop-domains-by-source-to-standard-vocabulary"><span class="header-section-number">6.2</span> OMOP Domains by Source to Standard Vocabulary</a></li>
  <li><a href="#incremental-loading" id="toc-incremental-loading" class="nav-link" data-scroll-target="#incremental-loading"><span class="header-section-number">6.3</span> Incremental Loading</a></li>
  <li><a href="#current-cdm" id="toc-current-cdm" class="nav-link" data-scroll-target="#current-cdm"><span class="header-section-number">6.4</span> Current CDM</a></li>
  </ul></li>
  <li><a href="#commonly-used-cdm-tables-overview" id="toc-commonly-used-cdm-tables-overview" class="nav-link" data-scroll-target="#commonly-used-cdm-tables-overview"><span class="header-section-number">7</span> Commonly Used CDM Tables Overview</a></li>
  <li><a href="#omop-data-quality" id="toc-omop-data-quality" class="nav-link" data-scroll-target="#omop-data-quality"><span class="header-section-number">8</span> OMOP Data Quality</a></li>
  <li><a href="#etl-basics" id="toc-etl-basics" class="nav-link" data-scroll-target="#etl-basics"><span class="header-section-number">9</span> ETL Basics</a>
  <ul class="collapse">
  <li><a href="#etl-steps" id="toc-etl-steps" class="nav-link" data-scroll-target="#etl-steps"><span class="header-section-number">9.1</span> ETL STEPS</a></li>
  </ul></li>
  <li><a href="#ohdsi-analysis-tools" id="toc-ohdsi-analysis-tools" class="nav-link" data-scroll-target="#ohdsi-analysis-tools"><span class="header-section-number">10</span> OHDSI Analysis Tools</a>
  <ul class="collapse">
  <li><a href="#data-science-handbook" id="toc-data-science-handbook" class="nav-link" data-scroll-target="#data-science-handbook"><span class="header-section-number">10.1</span> Data Science Handbook</a></li>
  <li><a href="#data-management-tools-and-resources" id="toc-data-management-tools-and-resources" class="nav-link" data-scroll-target="#data-management-tools-and-resources"><span class="header-section-number">10.2</span> Data Management Tools and resources</a></li>
  <li><a href="#programming-resources-jupyter-notebooks-python-sql-and-r-programming-resources" id="toc-programming-resources-jupyter-notebooks-python-sql-and-r-programming-resources" class="nav-link" data-scroll-target="#programming-resources-jupyter-notebooks-python-sql-and-r-programming-resources"><span class="header-section-number">10.3</span> Programming Resources: Jupyter Notebooks, Python, SQL, and R Programming Resources</a></li>
  </ul></li>
  <li><a href="#ohdsi-resources" id="toc-ohdsi-resources" class="nav-link" data-scroll-target="#ohdsi-resources"><span class="header-section-number">11</span> OHDSI Resources</a></li>
  <li><a href="#special-topic-cinical-registries-using-ohdsi" id="toc-special-topic-cinical-registries-using-ohdsi" class="nav-link" data-scroll-target="#special-topic-cinical-registries-using-ohdsi"><span class="header-section-number">12</span> Special Topic: Cinical Registries Using OHDSI</a></li>
  <li><a href="#etl---pulmonary-hypertension-registries" id="toc-etl---pulmonary-hypertension-registries" class="nav-link" data-scroll-target="#etl---pulmonary-hypertension-registries"><span class="header-section-number">13</span> ETL - Pulmonary Hypertension Registries</a></li>
  <li><a href="#special-topic-sssom" id="toc-special-topic-sssom" class="nav-link" data-scroll-target="#special-topic-sssom"><span class="header-section-number">14</span> Special topic: SSSOM</a></li>
  <li><a href="#recommended-ohdsi-community-videos" id="toc-recommended-ohdsi-community-videos" class="nav-link" data-scroll-target="#recommended-ohdsi-community-videos"><span class="header-section-number">15</span> Recommended OHDSI Community Videos</a>
  <ul class="collapse">
  <li><a href="#ohdsi-community" id="toc-ohdsi-community" class="nav-link" data-scroll-target="#ohdsi-community"><span class="header-section-number">15.1</span> OHDSI Community</a></li>
  <li><a href="#tufts-bridge2ai-standards-module" id="toc-tufts-bridge2ai-standards-module" class="nav-link" data-scroll-target="#tufts-bridge2ai-standards-module"><span class="header-section-number">15.2</span> Tufts Bridge2AI Standards Module</a></li>
  </ul></li>
  <li><a href="#bias-in-observational-research" id="toc-bias-in-observational-research" class="nav-link" data-scroll-target="#bias-in-observational-research"><span class="header-section-number">16</span> Bias in Observational Research</a></li>
  <li><a href="#redcap-training-resouces" id="toc-redcap-training-resouces" class="nav-link" data-scroll-target="#redcap-training-resouces"><span class="header-section-number">17</span> REdCAP Training Resouces</a>
  <ul class="collapse">
  <li><a href="#this-is-the-main-redcap-training-page-redcap-resources" id="toc-this-is-the-main-redcap-training-page-redcap-resources" class="nav-link" data-scroll-target="#this-is-the-main-redcap-training-page-redcap-resources"><span class="header-section-number">17.1</span> This is the main REDCap training page: REDCap Resources</a></li>
  <li><a href="#analysis-with-sql-ohdsiomop" id="toc-analysis-with-sql-ohdsiomop" class="nav-link" data-scroll-target="#analysis-with-sql-ohdsiomop"><span class="header-section-number">17.2</span> Analysis with SQL (OHDSI/OMOP)</a></li>
  <li><a href="#analysis-with-r" id="toc-analysis-with-r" class="nav-link" data-scroll-target="#analysis-with-r"><span class="header-section-number">17.3</span> Analysis with R</a>
  <ul class="collapse">
  <li><a href="#reading-csv-files-into-r-data-frames" id="toc-reading-csv-files-into-r-data-frames" class="nav-link" data-scroll-target="#reading-csv-files-into-r-data-frames"><span class="header-section-number">17.3.1</span> Reading CSV files into R data frames:</a></li>
  <li><a href="#joining-the-person-visit-table-with-the-condition-occurrence-table" id="toc-joining-the-person-visit-table-with-the-condition-occurrence-table" class="nav-link" data-scroll-target="#joining-the-person-visit-table-with-the-condition-occurrence-table"><span class="header-section-number">17.3.2</span> Joining the Person-Visit table with the Condition Occurrence table:</a></li>
  <li><a href="#search-by-a-list-of-person_ids" id="toc-search-by-a-list-of-person_ids" class="nav-link" data-scroll-target="#search-by-a-list-of-person_ids"><span class="header-section-number">17.3.3</span> Search by a list of <code>person_ids</code>:</a></li>
  <li><a href="#search-by-a-specific-condition-concept-code" id="toc-search-by-a-specific-condition-concept-code" class="nav-link" data-scroll-target="#search-by-a-specific-condition-concept-code"><span class="header-section-number">17.3.4</span> Search by a specific condition concept code:</a></li>
  <li><a href="#search-by-a-date-range" id="toc-search-by-a-date-range" class="nav-link" data-scroll-target="#search-by-a-date-range"><span class="header-section-number">17.3.5</span> Search by a date range:</a></li>
  </ul></li>
  <li><a href="#sas" id="toc-sas" class="nav-link" data-scroll-target="#sas"><span class="header-section-number">17.4</span> SAS</a>
  <ul class="collapse">
  <li><a href="#loading-data" id="toc-loading-data" class="nav-link" data-scroll-target="#loading-data"><span class="header-section-number">17.4.1</span> Loading Data</a></li>
  <li><a href="#sas-code" id="toc-sas-code" class="nav-link" data-scroll-target="#sas-code"><span class="header-section-number">17.4.2</span> SAS Code</a></li>
  </ul></li>
  <li><a href="#r" id="toc-r" class="nav-link" data-scroll-target="#r"><span class="header-section-number">17.5</span> R</a>
  <ul class="collapse">
  <li><a href="#loading-data-1" id="toc-loading-data-1" class="nav-link" data-scroll-target="#loading-data-1"><span class="header-section-number">17.5.1</span> Loading Data</a></li>
  <li><a href="#r-code" id="toc-r-code" class="nav-link" data-scroll-target="#r-code"><span class="header-section-number">17.5.2</span> R Code</a></li>
  </ul></li>
  <li><a href="#stata" id="toc-stata" class="nav-link" data-scroll-target="#stata"><span class="header-section-number">17.6</span> Stata</a>
  <ul class="collapse">
  <li><a href="#loading-data-2" id="toc-loading-data-2" class="nav-link" data-scroll-target="#loading-data-2"><span class="header-section-number">17.6.1</span> Loading Data</a></li>
  <li><a href="#stata-code" id="toc-stata-code" class="nav-link" data-scroll-target="#stata-code"><span class="header-section-number">17.6.2</span> Stata Code</a></li>
  </ul></li>
  <li><a href="#spss" id="toc-spss" class="nav-link" data-scroll-target="#spss"><span class="header-section-number">17.7</span> SPSS</a>
  <ul class="collapse">
  <li><a href="#loading-data-3" id="toc-loading-data-3" class="nav-link" data-scroll-target="#loading-data-3"><span class="header-section-number">17.7.1</span> Loading Data</a></li>
  <li><a href="#spss-code" id="toc-spss-code" class="nav-link" data-scroll-target="#spss-code"><span class="header-section-number">17.7.2</span> SPSS Code</a></li>
  </ul></li>
  <li><a href="#python" id="toc-python" class="nav-link" data-scroll-target="#python"><span class="header-section-number">17.8</span> Python</a>
  <ul class="collapse">
  <li><a href="#loading-data-4" id="toc-loading-data-4" class="nav-link" data-scroll-target="#loading-data-4"><span class="header-section-number">17.8.1</span> Loading Data</a></li>
  <li><a href="#python-code" id="toc-python-code" class="nav-link" data-scroll-target="#python-code"><span class="header-section-number">17.8.2</span> Python Code</a></li>
  <li><a href="#sample-ohdsi-network-study-table" id="toc-sample-ohdsi-network-study-table" class="nav-link" data-scroll-target="#sample-ohdsi-network-study-table"><span class="header-section-number">17.8.3</span> SAMPLE OHDSI Network Study TABLE</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Resources</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="resources" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Resources</h1>
</section>
<section id="table-of-contents" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Table of Contents</h1>
<ul>
<li><a href="#ohdsi-resources">OHDSI_Resources</a></li>
<li><a href="#omop-cdm-basic-data-dictionary">OMOP CDM Basic Data Dictionary</a></li>
<li><a href="#projects-best-suited-for-observational-research-and-ohdsi-network-studies">Projects Best Suited for Observational Research and OHDSI Network Studies</a></li>
<li><a href="#analytic-use-cases-and-examples">Analytic Use Cases and Examples</a></li>
<li>[Data Management Tools and Resources(##Data-Management-Tools-and-resources)</li>
<li><a href="#incremental-loading">Incremental Loading</a></li>
<li><a href="#Data-Content-Ontology">Data Content Ontology</a></li>
<li><a href="#current-cdm">Current CDM</a></li>
<li><a href="#commonly-used-cdm-tables-overview">Commonly Used CDM Tables Overview</a></li>
<li><a href="#ETL-Basics">ETL Basics</a></li>
<li><a href="#ohdsi-analysis-tools">OHDSI Analysis Tools</a></li>
<li><a href="#data-science-handbook">Data Science Handbook</a></li>
<li><a href="#jupyter-notebooks-and-programming">Jupyter Notebooks and programming</a></li>
<li><a href="#recommended-OHDSI-community-videos">Recommended OHDSI Community Videos</a></li>
<li><a href="#python-sql-and-r-programming-resources">Python, SQL, and R Programming Resources</a></li>
<li><a href="#analysis-with-sql">Analysis with SQL</a></li>
<li><a href="#analysis-with-r">Analysis with R</a></li>
<li><a href="#bias-in-observational-research">Bias in Observational Research</a></li>
<li>[REDCAP training resources] (#redcap-training-resources)</li>
</ul>
</section>
<section id="omop-cdm-basic-data-dictionary" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> OMOP CDM Basic Data Dictionary</h1>
For a sample interactive OMOP data dictionary, please click on the image below: <a href="https://dbjhu.github.io/OMOPDD.html"><img src="https://dbjhu.github.io/DDthumbnail.png" class="img-fluid" alt="OMOP Data Dictionary Thumbnail"></a>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
</section>
<section id="projects-best-suited-for-observational-research-and-ohdsi-network-studies" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Projects Best Suited for Observational Research and OHDSI Network Studies</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="AnalyticUseCases.png" class="img-fluid figure-img"></p>
<figcaption>Source: https://www.ohdsi.org/wp-content/uploads/2023/01/SOS-challenge-intro-24jan2023.pdf</figcaption>
</figure>
</div>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
</section>
<section id="this-is-the-exact-same-table-as-in-the-image-above-only-in-markdown" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> (This is the exact same table as in the image above only in Markdown)</h1>
<section id="analytic-use-cases-and-examples" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="analytic-use-cases-and-examples"><span class="header-section-number">5.1</span> Analytic Use Cases and Examples</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 12%">
<col style="width: 9%">
<col style="width: 38%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Analytic use case</th>
<th>Type</th>
<th>Structure</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Clinical characterization</strong></td>
<td>Disease Natural History</td>
<td>Amongst patients who are diagnosed with <code>&lt;insert your favorite disease&gt;</code>, what are the patient’s characteristics from their medical history?</td>
<td>Amongst patients with rheumatoid arthritis, what are their demographics (age, gender), prior conditions, medications, and health service utilization behaviors?</td>
</tr>
<tr class="even">
<td></td>
<td>Treatment utilization</td>
<td>Amongst patients who have <code>&lt;insert your favorite disease&gt;</code>, which treatments were patients exposed to amongst <code>&lt;list of treatments for disease&gt;</code> and in which sequence?</td>
<td>Amongst patients with depression, which treatments were patients exposed to SSRI, SNRI, TCA, bupropion, esketamine and in which sequence?</td>
</tr>
<tr class="odd">
<td></td>
<td>Outcome incidence</td>
<td>Amongst patients who are new users of <code>&lt;insert your favorite drug&gt;</code>, how many patients experienced <code>&lt;insert your favorite known adverse event from the drug profile&gt;</code> within <code>&lt;time horizon following exposure start&gt;</code>?</td>
<td>Amongst patients who are new users of methylphenidate, how many patients experienced psychosis within 1 year of initiating treatment?</td>
</tr>
<tr class="even">
<td><strong>Population-level effect estimation</strong></td>
<td>Safety surveillance</td>
<td>Does exposure to <code>&lt;insert your favorite drug&gt;</code> increase the risk of experiencing <code>&lt;insert an adverse event&gt;</code> within <code>&lt;time horizon following exposure start&gt;</code>?</td>
<td>Does exposure to ACE inhibitor increase the risk of experiencing Angioedema within 1 month after exposure start?</td>
</tr>
<tr class="odd">
<td></td>
<td>Comparative effectiveness</td>
<td>Does exposure to <code>&lt;insert your favorite drug&gt;</code> have a different risk of experiencing <code>&lt;insert any outcome (safety or benefit)&gt;</code> within <code>&lt;time horizon following exposure start&gt;</code>, relative to <code>&lt;insert your comparator treatment&gt;</code>?</td>
<td>Does exposure to ACE inhibitor have a different risk of experiencing acute myocardial infarction while on treatment, relative to thiazide diuretic?</td>
</tr>
<tr class="even">
<td><strong>Patient level prediction</strong></td>
<td>Disease onset and progression</td>
<td>For a given patient who is diagnosed with <code>&lt;insert your favorite disease&gt;</code>, what is the probability that they will go on to have <code>&lt;another disease or related complication&gt;</code> within <code>&lt;time horizon from diagnosis&gt;</code>?</td>
<td>For a given patient who is newly diagnosed with atrial fibrillation, what is the probability that they will go onto to have ischemic stroke in next 3 years?</td>
</tr>
<tr class="odd">
<td></td>
<td>Treatment response</td>
<td>For a given patient who is a new user of <code>&lt;insert your favorite chronically-used drug&gt;</code>, what is the probability that they will <code>&lt;insert desired effect&gt;</code> in <code>&lt;time window&gt;</code>?</td>
<td>For a given patient with T2DM who start on metformin, what is the probability that they will maintain HbA1C &lt;6.5% after 3 years?</td>
</tr>
<tr class="even">
<td></td>
<td>Treatment safety</td>
<td>For a given patient who is a new user of <code>&lt;insert your favorite drug&gt;</code>, what is the probability that they will experience <code>&lt;insert adverse event&gt;</code> within <code>&lt;time horizon following exposure&gt;</code>?</td>
<td>For a given patient who is a new user of warfarin, what is the probability that they will have GI bleed in 1 year?</td>
</tr>
</tbody>
</table>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
</section>
<section id="important-paper-about-implementation-of-the-omop-cdm" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="important-paper-about-implementation-of-the-omop-cdm"><span class="header-section-number">5.2</span> Important Paper About Implementation of the OMOP CDM!</h2>
<p><a href="https://doi.org/10.1093/jamia/ocad214">Erica A Voss, Clair Blacketer, Sebastiaan van Sandijk, Maxim Moinat, Michael Kallfelz, Michel van Speybroeck, Daniel Prieto-Alhambra, Martijn J Schuemie, Peter R Rijnbeek, European Health Data &amp; Evidence Network—learnings from building out a standardized international health data network, Journal of the American Medical Informatics Association, 2023;, ocad214</a></p>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
</section>
</section>
<section id="data-content-ontology" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Data Content Ontology</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://img.youtube.com/vi/4uXqNLsiVuc/maxresdefault.jpg" class="img-fluid figure-img"></p>
<figcaption>Dr.&nbsp;Rachel Richesson presents “Learning to Use EHR Data in Learning Health Systems”</figcaption>
</figure>
</div>
<section id="overview-of-major-clinical-terminologies-and-coding-systems" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="overview-of-major-clinical-terminologies-and-coding-systems"><span class="header-section-number">6.1</span> Overview of Major Clinical Terminologies and Coding Systems</h2>
<p>This document provides a detailed overview of several essential clinical terminologies and coding systems used in healthcare. Each system has a specific role and is crucial for standardized communication in healthcare settings. The information includes development history, usage, and updates of these systems.</p>
<p>For more in-depth information, links to the respective official websites are provided.</p>
<section id="snomed-clinical-terms-snomed-ct" class="level3" data-number="6.1.1">
<h3 data-number="6.1.1" class="anchored" data-anchor-id="snomed-clinical-terms-snomed-ct"><span class="header-section-number">6.1.1</span> SNOMED Clinical Terms (SNOMED CT)</h3>
<ul>
<li><strong>Development:</strong> Originally by the College of American Pathologists, now under SNOMED International.</li>
<li><strong>Adoption:</strong> Used in over 50 countries.</li>
<li><strong>Concepts:</strong> Over 340,000 active concepts in 19 hierarchies.</li>
<li><strong>Usage:</strong> Encodes clinical information including diseases, findings, and procedures.</li>
<li><strong>Updates:</strong> Biannual, with more frequent updates planned.</li>
<li><strong>More Information:</strong> <a href="https://www.snomed.org/snomed-ct">SNOMED International</a></li>
</ul>
</section>
<section id="logical-observation-identifiers-names-and-codes-loinc" class="level3" data-number="6.1.2">
<h3 data-number="6.1.2" class="anchored" data-anchor-id="logical-observation-identifiers-names-and-codes-loinc"><span class="header-section-number">6.1.2</span> Logical Observation Identifiers Names and Codes (LOINC)</h3>
<ul>
<li><strong>Developer:</strong> Regenstrief Institute.</li>
<li><strong>Function:</strong> Identifiers for laboratory and clinical observations.</li>
<li><strong>Content:</strong> Over 90,000 terms.</li>
<li><strong>Collaboration:</strong> With SNOMED CT for coded content development.</li>
<li><strong>Updates:</strong> Biannual.</li>
<li><strong>More Information:</strong> <a href="https://loinc.org">LOINC</a></li>
</ul>
</section>
<section id="rxnorm" class="level3" data-number="6.1.3">
<h3 data-number="6.1.3" class="anchored" data-anchor-id="rxnorm"><span class="header-section-number">6.1.3</span> RxNorm</h3>
<ul>
<li><strong>Developer:</strong> National Library of Medicine (NLM).</li>
<li><strong>Function:</strong> Standard nomenclature for medications.</li>
<li><strong>Integration:</strong> Links to various drug vocabularies.</li>
<li><strong>Access:</strong> Requires UMLS user license for proprietary content.</li>
<li><strong>More Information:</strong> <a href="https://www.nlm.nih.gov/research/umls/rxnorm">RxNorm - NLM</a></li>
</ul>
</section>
<section id="international-classification-of-disease-icd" class="level3" data-number="6.1.4">
<h3 data-number="6.1.4" class="anchored" data-anchor-id="international-classification-of-disease-icd"><span class="header-section-number">6.1.4</span> International Classification of Disease (ICD)</h3>
<ul>
<li><strong>Endorsement:</strong> World Health Organization (WHO).</li>
<li><strong>Versions:</strong> ICD-10 widely used with national extensions; ICD-11 adopted for future use.</li>
<li><strong>Purpose:</strong> Epidemiology, health management, clinical purposes.</li>
<li><strong>Updates:</strong> Annual, freely available.</li>
<li><strong>More Information:</strong> <a href="https://www.who.int/classifications/icd">WHO ICD</a></li>
</ul>
</section>
<section id="current-procedural-terminology-cpt" class="level3" data-number="6.1.5">
<h3 data-number="6.1.5" class="anchored" data-anchor-id="current-procedural-terminology-cpt"><span class="header-section-number">6.1.5</span> Current Procedural Terminology (CPT)</h3>
<ul>
<li><strong>Developer:</strong> American Medical Association (AMA).</li>
<li><strong>Use:</strong> Encoding of medical services and procedures in the USA.</li>
<li><strong>Categories:</strong> Three categories of codes.</li>
<li><strong>Requirement:</strong> License from AMA for use.</li>
<li><strong>More Information:</strong> <a href="https://www.ama-assn.org/practice-management/cpt">CPT - AMA</a></li>
</ul>
</section>
<section id="human-phenotype-ontology-hpo" class="level3" data-number="6.1.6">
<h3 data-number="6.1.6" class="anchored" data-anchor-id="human-phenotype-ontology-hpo"><span class="header-section-number">6.1.6</span> Human Phenotype Ontology (HPO)</h3>
<ul>
<li><strong>Function:</strong> Bioinformatic resources for human diseases and phenotypes analysis.</li>
<li><strong>Components:</strong> Phenotype vocabulary, disease-phenotype annotations, algorithms.</li>
<li><strong>Applications:</strong> Genomic interpretation, gene-disease discovery, precision medicine.</li>
<li><strong>Content:</strong> Over 13,000 terms in 5 hierarchies.</li>
<li><strong>Availability:</strong> Freely available, multiple releases per year.</li>
<li><strong>More Information:</strong> <a href="https://hpo.jax.org">Human Phenotype Ontology</a></li>
</ul>
</section>
<section id="unified-medical-language-system-umls" class="level3" data-number="6.1.7">
<h3 data-number="6.1.7" class="anchored" data-anchor-id="unified-medical-language-system-umls"><span class="header-section-number">6.1.7</span> Unified Medical Language System (UMLS)</h3>
<ul>
<li><strong>Initiation:</strong> By the US National Library of Medicine in 1986.</li>
<li><strong>Goal:</strong> To aid in the retrieval and integration of electronic biomedical information.</li>
<li><strong>Challenge Addressed:</strong> Different vocabularies expressing the same information differently.</li>
<li><strong>Availability:</strong> Free, but requires a license due to additional licensing requirements of some contents.</li>
<li><strong>More Information:</strong> <a href="https://www.nlm.nih.gov/research/umls">UMLS - NLM</a></li>
</ul>
</section>
<section id="ontology-mapping-in-bioportal-applications" class="level3" data-number="6.1.8">
<h3 data-number="6.1.8" class="anchored" data-anchor-id="ontology-mapping-in-bioportal-applications"><span class="header-section-number">6.1.8</span> Ontology Mapping in BioPortal Applications</h3>
<ul>
<li><p><strong>Process:</strong> Finding the closest match of a code from one ontology in another.</p></li>
<li><p><strong>Matching:</strong> Exact equivalence is rare; approximate matching is common.</p></li>
<li><p><strong>Challenges:</strong> Labor-intensive and requires understanding the maps’ nature and limitations.</p></li>
<li><p><strong>Alternative Approach:</strong> Mapping multiple ontologies to a central core terminology, as used by the OHDSI consortium.</p></li>
<li><p><strong>More Information:</strong> <a href="https://bioportal.bioontology.org">BioPortal</a></p>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div></li>
</ul>
<p>https://www.healthit.gov/isa/section-i-vocabularycode-setterminology-standards-and-implementation-specifications</p>
</section>
</section>
<section id="omop-domains-by-source-to-standard-vocabulary" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="omop-domains-by-source-to-standard-vocabulary"><span class="header-section-number">6.2</span> OMOP Domains by Source to Standard Vocabulary</h2>
<pre class="mermaid"><code>graph LR
    ICD9("ICD9") --&gt;|Transformation to OMOP CDM| SNOMED("STANDARD&lt;br&gt;Vocabulary Concept Code&lt;br&gt;SNOMED")
    ICD10("ICD10") --&gt;|Transformation to OMOP CDM| SNOMED</code></pre>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
<table class="caption-top table">
<colgroup>
<col style="width: 31%">
<col style="width: 37%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>Domain</th>
<th>Source Vocabulary</th>
<th>Standard Vocabulary</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Conditions</td>
<td>ICD9, ICD10</td>
<td>SNOMED</td>
</tr>
<tr class="even">
<td>Measurements</td>
<td>LOINC or institutional specific codes</td>
<td>LOINC</td>
</tr>
<tr class="odd">
<td>Drugs</td>
<td>NDC</td>
<td>RxNORM</td>
</tr>
<tr class="even">
<td>Procedures</td>
<td>ICD9, ICD10, CPT</td>
<td>SNOMED</td>
</tr>
</tbody>
</table>
<ul>
<li><p>ICD = International Classification of Diseases</p></li>
<li><p>SNOMED = Systematized Nomenclature of Medicine</p></li>
<li><p>LOINC = Logical Observation Identifiers Names and Codes</p></li>
<li><p>NDC = National Drug Code</p></li>
<li><p>CPT = Current Procedural Terminology</p>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div></li>
</ul>
</section>
<section id="incremental-loading" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="incremental-loading"><span class="header-section-number">6.3</span> Incremental Loading</h2>
<p>Incremental loading in the context of OHDSI refers to the process of adding new or updated data to an existing OHDSI database without the need to completely rebuild or refresh the entire dataset. This can be particularly useful for large datasets where full loads can be time-consuming and inefficient. The process involves extracting only the changes since the last load and then transforming and loading this delta of data into the existing OMOP Common Data Model (CDM) used by OHDSI tools.</p>
<p>For instance, in the development of an ETL (Extract, Transform, Load) process for the bulk and incremental load of German patient data into the OMOP CDM using FHIR as referenced by OHDSI, it suggests that the incremental loading is an essential part of keeping the database up-to-date in an efficient manner​. <a href="https://ohdsi.org/2021-global-symposium-showcase-44/#:~:text=,Reinecke%2C%20Michele%20Zoch%2C%20Martin%20Sedlmayr">OHDSI Symposium Showcase #44</a></p>
<p>This group alos described a <a href="https://www.ohdsi.org/wp-content/uploads/2021/09/14-abstract-lee.pdf">Near Real-Time Incremental OMOP-CDM ETL System</a></p>
<p>This is also described by Dr.&nbsp;DuWayne Willett, CMIO of UTSW, at around minute 30 of this video:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://www.youtube.com/watch?v=DPatSxFkIpI" title="OHDSI Symposium Presentation by Dr. DuWayne Willett"><img src="http://img.youtube.com/vi/DPatSxFkIpI/0.jpg" class="img-fluid figure-img" alt="OHDSI Symposium Presentation"></a></p>
<figcaption>OHDSI Symposium Presentation</figcaption>
</figure>
</div>
<p>…and in this OHDSI symposium presentation: <img src="https://www.ohdsi.org/wp-content/uploads/2023/10/10-Willett-Poster.png" class="img-fluid" alt="OHDSI Symposium Presentation">.</p>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
</section>
<section id="current-cdm" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="current-cdm"><span class="header-section-number">6.4</span> Current CDM</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/DBJHU/DBJHU.github.io/blob/main/cdm54.png" class="img-fluid figure-img"></p>
<figcaption>CDM54 Image</figcaption>
</figure>
</div>
<p><em>Source: <a href="https://ohdsi.github.io/CommonDataModel/index.html">OHDSI Common Data Model</a></em></p>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
<p><a href="https://github.com/DBJHU/DBJHU.github.io/blob/main/SelectOMOPDataDictionaryInteractivev2.html">Interactive (Select) OMOP Data Dictionary</a></p>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
</section>
</section>
<section id="commonly-used-cdm-tables-overview" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Commonly Used CDM Tables Overview</h1>
<p>The OMOP common data model (CDM) is a relational database made up of different tables that relate to each other by foreign keys (XXXX_ID values; e.g., PERSON_ID or PROVIDER_ID). The OMOP tables in your data export are as follows:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 48%">
<col style="width: 51%">
</colgroup>
<thead>
<tr class="header">
<th>Table</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Person</td>
<td>Contains basic demographic information describing a participant, including biological sex, birth date, race, and ethnicity.</td>
</tr>
<tr class="even">
<td>Visit_occurrence</td>
<td>Captures encounters with healthcare providers or similar events. Contains the type of visit a person has (outpatient care, inpatient care, or long-term care), as well as the date and duration information. Rows in other tables can reference this table, for example, condition_occurrences related to a specific visit.</td>
</tr>
<tr class="odd">
<td>Condition_occurrence</td>
<td>Indicates the presence of a disease or medical condition stated as a diagnosis, a sign, or symptom, which is either observed by a provider or reported by the patient.</td>
</tr>
<tr class="even">
<td>Drug_exposure</td>
<td>Captures records about the utilization of a medication. Drug exposures include prescription and over-the-counter medicines, vaccines, and large-molecule biologic therapies. Radiological devices ingested or applied locally do not count as drugs. Drug exposure is inferred from clinical events associated with orders, prescriptions written, pharmacy dispensing, procedural administrations, and other patient-reported information.</td>
</tr>
<tr class="odd">
<td>Measurement</td>
<td>Contains both orders and results of a systematic and standardized examination or testing of a participant or participant’s sample, including laboratory tests, vital signs, quantitative findings from pathology reports, etc.</td>
</tr>
<tr class="even">
<td>Procedure_occurrence</td>
<td>Contains records of activities or processes ordered by or carried out by a healthcare provider on the patient to have a diagnostic or therapeutic purpose.</td>
</tr>
<tr class="odd">
<td>Observation</td>
<td>Captures clinical facts about a person obtained in the context of an examination, questioning, or a procedure. Any data that cannot be represented by another domain, such as social and lifestyle facts, medical history, and family history, are recorded here.</td>
</tr>
<tr class="even">
<td>Device_exposure</td>
<td>Captures information about a person’s exposure to a foreign physical object or instrument which is used for diagnostic or therapeutic purposes. Devices include implantable objects, blood transfusions, medical equipment and supplies, other instruments used in medical procedures, and material used in clinical care.</td>
</tr>
<tr class="odd">
<td>Death</td>
<td>Contains the clinical events surrounding how and when a participant dies.</td>
</tr>
</tbody>
</table>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
</section>
<section id="omop-data-quality" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> OMOP Data Quality</h1>
<p><a href="https://ohdsi.github.io/TheBookOfOhdsi/DataQuality.html">The Book of OHDSI - Chapter 15: Data Quality</a></p>
<p><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5051581/">Kahn MG, Callahan TJ, Barnard J, Bauck AE, Brown J, Davidson BN, Estiri H, Goerg C, Holve E, Johnson SG, Liaw ST, Hamilton-Lopez M, Meeker D, Ong TC, Ryan P, Shang N, Weiskopf NG, Weng C, Zozus MN, Schilling L. A Harmonized Data Quality Assessment Terminology and Framework for the Secondary Use of Electronic Health Record Data. EGEMS (Wash DC). 2016 Sep 11;4(1):1244. doi: 10.13063/2327-9214.1244. PMID: 27713905; PMCID: PMC5051581.</a></p>
</section>
<section id="etl-basics" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> ETL Basics</h1>
<p>https://www.ohdsi.org/wp-content/uploads/2019/09/OMOP-Common-Data-Model-Extract-Transform-Load.pdf https://ohdsi.github.io/TheBookOfOhdsi/ExtractTransformLoad.html</p>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
<section id="etl-steps" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="etl-steps"><span class="header-section-number">9.1</span> ETL STEPS</h2>
<ol type="1">
<li><strong>Dataset profiling and documentation</strong>
<ul>
<li>Create data model documentation, sample data, data dictionaries, code lists, and other relevant information (23-Aug)</li>
<li>Execute database profiling scan (WhiteRabbit) on source database</li>
<li>Prepare mapping approach/documents based on scan reports from database profiling scan</li>
</ul></li>
<li><strong>Generation of the ETL Design</strong>
<ul>
<li>Mapping workshop with all relevant parties to:
<ol type="1">
<li>Understand the source</li>
<li>Define the scope of source data to be transformed</li>
<li>Define acceptance criteria for OMOP output</li>
</ol>
<ul>
<li>Output: draft mapping document</li>
</ul></li>
<li>Finalize mapping document:
<ul>
<li>Integrate all notes/documentation from workshop</li>
<li>Work through mappings and verify, update, fill in gaps</li>
<li>Meetings/emails with data contact/technical contact (TC) as needed</li>
</ul></li>
</ul></li>
<li><strong>Source Data Integrations and Semantic Mapping</strong>
<ul>
<li>Source Code mapping:
<ul>
<li>Identify which codes are already mapped to standard vocabulary</li>
<li>Identify code types for codes that need to be mapped</li>
<li>Translation of code description/phrases to English, if/as needed</li>
<li>Create proposed code mappings</li>
</ul></li>
<li>Generate mappings for data coming out of flowsheets (together with consortium)</li>
<li>Review/approval of code mappings, often done by medical experts affiliated with Data Owner (DO).</li>
<li>Identify medical imaging available and define mappings to Imaging Extension</li>
<li>Identify waveform data available and map using consortium-defined guidelines</li>
<li>Use OHNLP to extract OMOP data from unstructured sources</li>
</ul></li>
<li><strong>Technical architecture design</strong>
<ul>
<li>Continuous Integration, Continuous Deployment (CI/CD):
<ul>
<li>Decide on ETL dev/deployment flow</li>
<li>Put version control mechanisms in place</li>
</ul></li>
<li>OHDSI Ecosystem:
<ul>
<li>Evaluate infrastructure needed</li>
<li>Create infrastructure design documentation</li>
</ul></li>
</ul></li>
<li><strong>Technical ETL Development</strong>
<ul>
<li>Implement ETL (Preferred Language/Structure?)</li>
<li>Update ETL based on testing/QA/feedback (8, 9)</li>
</ul></li>
<li><strong>Setting up of Infrastructure</strong>
<ul>
<li>Deploy core servers and associated services based on infrastructure design in (4)</li>
</ul></li>
<li><strong>Installation of the OHDSI tools</strong>
<ul>
<li>Install and configure all software (database server, Achilles/DQD/Ares, Atlas/WebAPI, R Studio server, HADES, notebooks/tooling related to analytics, and any other software to suit a site’s specific needs).</li>
</ul></li>
<li><strong>ETL Testing and Validation</strong>
<ul>
<li>ETL Execution:
<ul>
<li>Test ETL using sample/development data (with limited external data access)</li>
<li>Test ETL using DO data (with full external data access)</li>
<li>Verify and document QA</li>
<li>Submit Achilles/DQD/AresIndexer results to central location regularly</li>
</ul></li>
<li>ETL Development Planning and Management:
<ul>
<li>Review ETL testing and progress (TCs/meetings)</li>
</ul></li>
</ul></li>
<li><strong>Data Quality Assessment</strong>
<ul>
<li>QA/Acceptance testing:
<ul>
<li>Evaluate accuracy and completeness of mapping</li>
<li>Review and approval by DO</li>
</ul></li>
</ul></li>
<li><strong>Documentation</strong>
<ul>
<li>Mapping Documentation and Themis Checks</li>
<li>Transformation/Technical Documentation</li>
</ul></li>
<li><strong>Project Management Througout</strong>
<ul>
<li>Organization of tasks, milestones, and follow-up</li>
</ul></li>
</ol>
</section>
</section>
<section id="ohdsi-analysis-tools" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> OHDSI Analysis Tools</h1>
<p>R, SQL, Python, or any preferred data analysis software. Examples provided below are for R and SQL. [The Book of OHDSI Chapter 9] (https://ohdsi.github.io/TheBookOfOhdsi/SqlAndR.html) provides an overview of analysis of OHDSI data in R and SQL; note that you will not be able to avail yourselves of OHDSI software tools when analyzing your exported data for the reason explained above.</p>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
<section id="data-science-handbook" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="data-science-handbook"><span class="header-section-number">10.1</span> Data Science Handbook</h2>
<p><a href="https://datascience.stanford.edu/programs/stanford-data-science-scholars-program/data-science-handbook">Open, rigorous and reproducible research: A practitioner’s handbook</a> From Standord Data Science</p>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
</section>
<section id="data-management-tools-and-resources" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="data-management-tools-and-resources"><span class="header-section-number">10.2</span> Data Management Tools and resources</h2>
<p>DMP Tool: https://dmptool.org/ https://sharing.nih.gov/data-management-and-sharing-policy/planning-and-budgeting-for-data-management-and-sharing/writing-a-data-management-and-sharing-plan#after</p>
</section>
<section id="programming-resources-jupyter-notebooks-python-sql-and-r-programming-resources" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="programming-resources-jupyter-notebooks-python-sql-and-r-programming-resources"><span class="header-section-number">10.3</span> Programming Resources: Jupyter Notebooks, Python, SQL, and R Programming Resources</h2>
<ul>
<li><a href="https://jupyter.org/">Project Jupyter</a></li>
<li><a href="https://jupyter-notebook-beginner-guide.readthedocs.io/en/latest/what_is_jupyter.html">What is the Jupyter Notebook?</a></li>
<li><a href="https://bioinformatics.niaid.nih.gov/resources">NIAID NIH Informatics resources</a></li>
</ul>
<p>Software Carpentry is a website that provides free online lessons to researchers wanting to enhance their programming skills for data analysis. This website offers free online lessons on a variety of useful topics including:</p>
<ul>
<li><a href="http://swcarpentry.github.io/python-novice-inflammation/">Programming with Python</a></li>
<li><a href="http://swcarpentry.github.io/r-novice-inflammation/">Programming with R</a></li>
<li><a href="http://swcarpentry.github.io/sql-novice-survey/">Databases and SQL</a></li>
</ul>
<p>Additional resources:</p>
<ul>
<li><a href="http://www.datacamp.com/">DataCamp</a></li>
<li><a href="https://www.khanacademy.org/computing/computer-programming/sql/sql-basics/v/welcome-to-sql">Khan Academy</a></li>
<li><a href="https://www.codecademy.com/learn/learn-python">Codecademy - Learn Python 2</a></li>
<li><a href="https://jakevdp.github.io/PythonDataScienceHandbook/">Python Data Science Handbook</a></li>
<li><a href="https://r4ds.had.co.nz/">R for Data Science</a></li>
<li><a href="https://bioinformatics.niaid.nih.gov/resources%20-%2070.3.1">Introduction to Programming (NIAID, NIH)</a></li>
<li><a href="https://bioinformatics.niaid.nih.gov/resources%20-%2070.3.2">Python Programming (NIAID, NIH)</a></li>
<li><a href="https://bioinformatics.niaid.nih.gov/resources%20-%2070.3.3">Data Analysis with Python and Pandas (NIAID, NIH)</a></li>
<li><a href="https://bioinformatics.niaid.nih.gov/resources%20-%2070.3.4">Data Visualization with Python (NIAID, NIH)</a></li>
<li><a href="https://support.researchallofus.org/hc/en-us/articles/360039690191-Jupyter-Notebooks-and-programming">Source:NIH All of US Study</a></li>
</ul>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
</section>
</section>
<section id="ohdsi-resources" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> OHDSI Resources</h1>
<p>Hello! Please familiarize yourself with the following tools and resources which will help you throughout this course and your OHDSI journey.</p>
<p>Check out the <a href="https://forums.ohdsi.org/"><strong>OHDSI Forums</strong></a> <em>Introduce yourself on the “Welcome to OHDSI” thread.</em></p>
<p>Bookmark <a href="https://ohdsi.github.io/TheBookOfOhdsi/"><strong>The Book of OHDSI</strong></a></p>
<p>Check out <a href="https://ohdsi.github.io/CommonDataModel/faq.html"><strong>OHOP CDM FAQ</strong></a></p>
<p>Join the OHDSI <a href="https://forms.office.com/Pages/ResponsePage.aspx?id=lAAPoyCRq0q6TOVQkCOy1ZyG6Ud_r2tKuS0HcGnqiQZUQ05MOU9BSzEwOThZVjNQVVFGTDNZRENONiQlQCN0PWcu"><strong>Microsoft Teams</strong></a> environment.</p>
<p>Check out the <a href="https://physionet.org/content/mimic-iv-demo-omop/0.9/1_omop_data_csv/"><strong>MIMIC-IV demo data set</strong></a> in OMOP CDM format!</p>
<p>Register with <a href="https://academy.ehden.eu/"><strong>EHDEN Academy</strong></a></p>
<p>Visit the <a href="https://atlas-demo.ohdsi.org/"><strong>Atlas Demo</strong></a> and <a href="https://athena.ohdsi.org/search-terms/start"><strong>Athena</strong></a>.</p>
<p>Bookmark the <a href="https://youtube.com/playlist?list=PLpzbqK7kvfeXRQktX0PV-cRpb3EFA2e7Z"><strong>OHDSI YouTube tutorials and workshops</strong></a></p>
<p>Visit the <a href="https://dash.ohdsi.org/"><strong>OHDSI Community Dashboard</strong></a></p>
<p>Bookmark <a href="https://ohdsi.github.io/CommonDataModel/index.html"><strong>OMOP Common Data Model (ohdsi.github.io)</strong></a></p>
<p><a href="https://docs.github.com/en/get-started/quickstart/hello-world"><strong>Learn about GitHub</strong></a> if you don’t already know.</p>
<p>Plan to attend an <a href="https://ohdsi.org/community-calls/"><strong>OHDSI Community call</strong></a></p>
<p>Learn about OHDSI <a href="https://ohdsi.org/upcoming-working-group-calls/"><strong>Workgroups</strong></a></p>
<p>Follow OHDSI on social media: <a href="https://twitter.com/OHDSI"><strong>Twitter</strong></a> <a href="https://www.linkedin.com/company/ohdsi"><strong>LinkedIn</strong></a></p>
<p><a href="https://ohdsi.org/subscribe-to-our-newsletter/"><strong>Subscribe</strong></a> to the OHDSI Newsletter</p>
<p>Learn about past and <a href="https://ohdsi.org/2023-ohdsi-events/"><strong>upcoming OHDSI events</strong></a></p>
<p>Learn about OHDSI <a href="https://ohdsi.org/software-tools/"><strong>software</strong></a></p>
<p>Look up individual concepts in <a href="https://athena.ohdsi.org/">Athena</a></p>
<p>Check out useful OHDSI-related documentation here: <a href="https://support.researchallofus.org/hc/en-us/articles/360039585391-How-the-Observational-Medical-Outcomes-Partnership-OMOP-vocabulary-are-structured">NIH ALL of US OMOP Documentation</a></p>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
</section>
<section id="special-topic-cinical-registries-using-ohdsi" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> Special Topic: Cinical Registries Using OHDSI</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://youtu.be/DPatSxFkIpI?si=VOqE4VTlzIcxuWdP"><img src="http://img.youtube.com/vi/DPatSxFkIpI/0.jpg" class="img-fluid figure-img" alt="OHDSI and Clinical Registries: Sanity for Health Systems (Aug.&nbsp;22 Community Call)"></a></p>
<figcaption>OHDSI and Clinical Registries: Sanity for Health Systems (Aug.&nbsp;22 Community Call)</figcaption>
</figure>
</div>
<p><a href="https://www.ohdsi.org/wp-content/uploads/2022/09/OHDSI-Clinical_Registries.pdf">Clinical Registries in OHDSI - September 2022</a></p>
</section>
<section id="etl---pulmonary-hypertension-registries" class="level1" data-number="13">
<h1 data-number="13"><span class="header-section-number">13</span> ETL - Pulmonary Hypertension Registries</h1>
<p>GitHub repository: <a href="https://github.com/OHDSI/ETL--PulmonaryHypertensionRegistries">OHDSI/ETL–PulmonaryHypertensionRegistries</a></p>
</section>
<section id="special-topic-sssom" class="level1" data-number="14">
<h1 data-number="14"><span class="header-section-number">14</span> Special topic: SSSOM</h1>
<p>https://www.ohdsi.org/wp-content/uploads/2023/10/Talapova-Polina_Mapping_of_Critical_Care_EHR_Flowsheet_data_to_the_OMOP_CDM_via_SSSOM_2023symposium-Polina-Talapova.pdf</p>
<p>Matentzoglu N, Balhoff JP, Bello SM, Bizon C, BrushM, Callahan TJ et al.&nbsp;A Simple Standard for Sharing Ontological Mappings (SSSOM). Database. 2022. 2022:baac035, DOI: 10.1093/database/baac035.</p>
<p>Mapping Commons. SSSOM: Simple Standard for Sharing Ontological Mappings. Wiki [Internet]. Available from: https://mapping-commons.github.io/sssom/.</p>
<p>https://www.w3.org/2004/02/skos/</p>
</section>
<section id="recommended-ohdsi-community-videos" class="level1" data-number="15">
<h1 data-number="15"><span class="header-section-number">15</span> Recommended OHDSI Community Videos</h1>
<section id="ohdsi-community" class="level2" data-number="15.1">
<h2 data-number="15.1" class="anchored" data-anchor-id="ohdsi-community"><span class="header-section-number">15.1</span> OHDSI Community</h2>
<p><strong>Broadsea3.0</strong><br>
By: Lee Evans<br>
<a href="https://youtu.be/CNlsZzY7VrM"><img src="https://img.youtube.com/vi/CNlsZzY7VrM/0.jpg" class="img-fluid" alt="Broadsea 3.0"></a></p>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
</section>
<section id="tufts-bridge2ai-standards-module" class="level2" data-number="15.2">
<h2 data-number="15.2" class="anchored" data-anchor-id="tufts-bridge2ai-standards-module"><span class="header-section-number">15.2</span> Tufts Bridge2AI Standards Module</h2>
<ul>
<li><p><strong>June 15, 2023:</strong><br>
<strong>Data Quality Dashboard</strong><br>
By: Jared Houghtaling<br>
<a href="https://youtu.be/O2L1x0Sv3lc"><img src="https://img.youtube.com/vi/O2L1x0Sv3lc/0.jpg" class="img-fluid" alt="Data Quality Dashboard"></a></p></li>
<li><p><strong>July 6, 2023:</strong><br>
<strong>Data Quality Dashboard output demo</strong><br>
By: Jared Houghtaling<br>
<a href="https://youtu.be/qYDq5-dg-io"><img src="https://img.youtube.com/vi/qYDq5-dg-io/0.jpg" class="img-fluid" alt="Data Quality Dashboard output demo"></a></p></li>
<li><p><strong>July 13, 2023:</strong><br>
<strong>Achilles output demo</strong><br>
By: Jared Houghtaling<br>
<a href="https://youtu.be/bIRQVgcnAwI"><img src="https://img.youtube.com/vi/bIRQVgcnAwI/0.jpg" class="img-fluid" alt="Achilles output demo"></a></p></li>
<li><p><strong>July 27, 2023:</strong><br>
<strong>Flowsheet follow-up</strong><br>
By: Polina Talapova &amp; Jared Houghtaling<br>
<a href="https://youtu.be/3cTT2XJZslI"><img src="https://img.youtube.com/vi/3cTT2XJZslI/0.jpg" class="img-fluid" alt="Flowsheet follow-up"></a></p></li>
<li><p><strong>August 3, 2023:</strong><br>
<strong>OMOP Standardized Vocabularies - Part 1</strong><br>
By: Jared Houghtaling and Polina Talapova<br>
<a href="https://youtu.be/4xnH7-oJxyo"><img src="https://img.youtube.com/vi/4xnH7-oJxyo/0.jpg" class="img-fluid" alt="OMOP Standardized Vocabularies - Part 1"></a></p></li>
<li><p><strong>August 17, 2023:</strong><br>
<strong>OMOP Standardized Vocabularies - Part 2</strong><br>
By: Polina Talapova<br>
<a href="https://youtu.be/1J7ISUASx6k"><img src="https://img.youtube.com/vi/1J7ISUASx6k/0.jpg" class="img-fluid" alt="OMOP Standardized Vocabularies - Part 2"></a></p></li>
<li><p><strong>August 24, 2023:</strong><br>
<strong>How to download and set-up a DDL (Demo)</strong><br>
By: Jared Houghtaling<br>
<a href="https://youtu.be/x9W3sa1xGoQ"><img src="https://img.youtube.com/vi/x9W3sa1xGoQ/0.jpg" class="img-fluid" alt="How to download and set-up a DDL (Demo)"></a></p></li>
<li><p><strong>August 31, 2023:</strong><br>
<strong>Demo of WhiteRabbit and RabbitInAHat</strong><br>
By: Jared Houghtaling<br>
<a href="https://youtu.be/gu1fQVwkBo8"><img src="https://img.youtube.com/vi/gu1fQVwkBo8/0.jpg" class="img-fluid" alt="Demo of WhiteRabbit and RabbitInAHat"></a></p></li>
<li><p><strong>September 7, 2023:</strong><br>
<strong>ARES usefulness for ETL at Tufts</strong><br>
By: Jared Houghtaling<br>
<a href="https://youtu.be/Czox3WT1pDM"><img src="https://img.youtube.com/vi/Czox3WT1pDM/0.jpg" class="img-fluid" alt="ARES usefulness for ETL at Tufts"></a></p></li>
<li><p><strong>September 21, 2023:</strong><br>
<strong>Sample ETL Process</strong><br>
By: Jared Houghtaling<br>
<a href="https://youtu.be/uX289BrzXM4"><img src="https://img.youtube.com/vi/uX289BrzXM4/0.jpg" class="img-fluid" alt="Sample ETL Process"></a></p></li>
</ul>
<p><strong>October 12, 2023:</strong><br>
<strong>Google Form for Site Progress Tracking</strong><br>
With Jared Houghtaling and Andrew Williams<br>
<a href="https://youtu.be/oTP6ISo8FWc"><img src="https://img.youtube.com/vi/oTP6ISo8FWc/0.jpg" class="img-fluid" alt="Google Form for Site Progress Tracking"></a></p>
<ul>
<li><p><strong>October 26, 2023:</strong><br>
<strong>Review and Prioritization of DQD Results, and Discussion of DQD Issue Severity</strong><br>
With Jared Houghtaling<br>
<a href="https://youtu.be/dJr5tkm-Ex4"><img src="https://img.youtube.com/vi/dJr5tkm-Ex4/0.jpg" class="img-fluid" alt="Review and Prioritization of DQD Results, and Discussion of DQD Issue Severity"></a></p></li>
<li><p><strong>November 2, 2023:</strong><br>
<strong>Principles of Mapping and Vocab Gaps Identification</strong><br>
With Polina Talapova<br>
<a href="https://youtu.be/jOKzb3x6hmo"><img src="https://img.youtube.com/vi/jOKzb3x6hmo/0.jpg" class="img-fluid" alt="Principles of Mapping and Vocab Gaps Identification"></a></p></li>
<li><p><strong>November 9, 2023:</strong><br>
<strong>Usagi &amp; STCM Demo</strong><br>
With Polina Talapova &amp; Jared Houghtailing<br>
<a href="https://youtu.be/hNhph-elrp4"><img src="https://img.youtube.com/vi/hNhph-elrp4/0.jpg" class="img-fluid" alt="Usagi &amp; STCM Demo"></a></p></li>
</ul>
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
</section>
</section>
<section id="bias-in-observational-research" class="level1" data-number="16">
<h1 data-number="16"><span class="header-section-number">16</span> Bias in Observational Research</h1>
<ul>
<li><a href="https://www.pbs.org/newshour/show/how-racial-biases-in-medical-algorithms-lead-to-inequities-in-care">How racial biases in medical algorithms lead to inequities in care | PBS News Weekend</a></li>
<li><a href="https://petapixel.com/2023/05/04/ai-reveals-its-biases-by-generating-what-it-thinks-professors-look-like/">AI Reveals its Biases by Generating What it Thinks Professors Look Like | PetaPixel</a></li>
<li><a href="https://www.bmj.com/content/372/bmj.n304">Does “AI” stand for augmenting inequality in the era of covid-19 healthcare? | The BMJ</a></li>
<li><a href="https://datascience.aucenter.edu/">The AUC Data Science | Initiative (aucenter.edu)</a></li>
<li><a href="https://datascience.aucenter.edu/">ReCode-Report.pdf (data.org)</a></li>
<li><a href="https://vimeo.com/799212327?forcedownload=true&amp;_=4007b451dfc8424fa5226c4615e147ea">ADDI Researcher Roundtable: The Importance of Diversity in Dementia Research on Vimeo</a></li>
<li><a href="https://nap.nationalacademies.org/catalog/26803/advancing-antiracism-diversity-equity-and-inclusion-in-stemm-organizations-beyond">Advancing Antiracism, Diversity, Equity, and Inclusion in STEMM Organizations: Beyond Broadening Participation |The National Academies Press</a></li>
<li><a href="https://www.stlouisfed.org/education/the-composition-effect">Data Literacy: The Composition Effect | Education | St.&nbsp;Louis Fed (stlouisfed.org)</a></li>
<li><a href="https://www.youtube.com/watch?v=DzGSlWu4Lj0&amp;list=PLRqwW7v078fYdZFpf43d0NBh4hiGCRtfV&amp;index=6">A lecture by Pilar Ossorio at MLHC Professor of Law and Bioethics at the University of Wisconsin Law School</a></li>
<li><a href="https://www.phil-fak.uni-duesseldorf.de/fileadmin/Redaktion/Institute/Sozialwissenschaften/Kommunikations-_und_Medienwissenschaft/KMW_I/Working_Paper/Dunkelau___Leuschel__2019__Fairness-Aware_Machine_Learning.pdf">This paper by Dunkelau and Leuschel that summarizes Fairness-aware Machine Learning</a></li>
<li><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10546443/">Paper by Gichoya et al about minimixing bias in AI</a></li>
<li><a href="https://www.youtube.com/watch?v=1QlIbed_Hwg">A conversation with Cathy O’Neil, author of the critically acclaimed Weapons of Math Destruction - YouTube</a></li>
<li><a href="https://youtu.be/8V-yO7GNNlw?feature=shared">Nicole G. Weiskopf (NYU) and Carolyn Thompson (UCSD) – Bias in EHR - YouTube</a></li>
<li><a href="https://science.sciencemag.org/content/366/6464/447">This Obermeyer et al paper on dissecting racial bias in an algorithm used to manage the health of populations - Science, 2019</a></li>
<li><a href="https://science.sciencemag.org/content/366/6464/447">Fair ML Keynote talk + Microsoft talk + slides - Science, 2019</a></li>
<li><a href="https://science.sciencemag.org/content/366/6464/447">Maria Hightower, M.D., M.B.A., MPH Chief Digital Technology officer of the University of Chicago Medicine comments on the racial bias in AI and the algorithm described above - Science, 2019</a></li>
<li><a href="https://science.sciencemag.org/content/366/6464/447">How scientists are subtracting race from medical risk calculators - Science, 2021</a></li>
<li><a href="https://science.sciencemag.org/content/366/6464/447">Race After Technology, by Ruha Benjamin [Professor of African American studies at Princeton University], summarizes how technology [from data collection, data imputation, government policy, etc] can play a role in different outcomes in society - Science</a></li>
</ul>
</section>
<section id="redcap-training-resouces" class="level1" data-number="17">
<h1 data-number="17"><span class="header-section-number">17</span> REdCAP Training Resouces</h1>
<section id="this-is-the-main-redcap-training-page-redcap-resources" class="level2" data-number="17.1">
<h2 data-number="17.1" class="anchored" data-anchor-id="this-is-the-main-redcap-training-page-redcap-resources"><span class="header-section-number">17.1</span> This is the main REDCap training page: <a href="https://projectredcap.org/resources/">REDCap Resources</a></h2>
<p>From University of Colorado, below are excellent REDCap resources: <a href="https://cctsi.cuanschutz.edu/resources/informatics/redcap-resources">University of Colorado REDCap Resources</a></p>
</section>
<section id="analysis-with-sql-ohdsiomop" class="level2" data-number="17.2">
<h2 data-number="17.2" class="anchored" data-anchor-id="analysis-with-sql-ohdsiomop"><span class="header-section-number">17.2</span> Analysis with SQL (OHDSI/OMOP)</h2>
<p>The <a href="https://data.ohdsi.org/QueryLibrary/">OMOP Query Library</a> is a library of commonly-used SQL queries for the OMOP Common Data Model (CDM).</p>
</section>
<section id="analysis-with-r" class="level2" data-number="17.3">
<h2 data-number="17.3" class="anchored" data-anchor-id="analysis-with-r"><span class="header-section-number">17.3</span> Analysis with R</h2>
<p>Below are some sample R queries that demonstrate how to read in OMOP tables from CSV files, join them based on the <code>person_id</code> and <code>visit_occurrence_id</code> fields, and search for specific criteria.</p>
<p>Note: Adjust the file paths and column names accordingly based on the actual structure and location of your CSV files. The queries below are a generic representation and may need adjustments based on the specifics of your data set.</p>
<section id="reading-csv-files-into-r-data-frames" class="level3" data-number="17.3.1">
<h3 data-number="17.3.1" class="anchored" data-anchor-id="reading-csv-files-into-r-data-frames"><span class="header-section-number">17.3.1</span> Reading CSV files into R data frames:</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the CSV files into R data frames</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>person_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"path_to_person_table.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">stringsAsFactors=</span><span class="cn">FALSE</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>visit_occurrence_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"path_to_visit_occurrence_table.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">stringsAsFactors=</span><span class="cn">FALSE</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>condition_occurrence_df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"path_to_condition_occurrence_table.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">stringsAsFactors=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Join tables based on <code>person_id</code>:</p>
<p>When a person has multiple visits in the <code>visit_occurrence</code> table, joining the <code>person</code> table with the <code>visit_occurrence</code> table will result in multiple rows for that person, each corresponding to a different visit. This is a standard one-to-many join operation.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Join person with visit_occurrence on 'person_id'</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>person_visit_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(person_df, visit_occurrence_df, <span class="at">by=</span><span class="st">"person_id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="joining-the-person-visit-table-with-the-condition-occurrence-table" class="level3" data-number="17.3.2">
<h3 data-number="17.3.2" class="anchored" data-anchor-id="joining-the-person-visit-table-with-the-condition-occurrence-table"><span class="header-section-number">17.3.2</span> Joining the Person-Visit table with the Condition Occurrence table:</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Join the person-visit result with condition_occurrence on both 'person_id' and 'visit_occurrence_id'</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>full_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(person_visit_df, condition_occurrence_df, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"person_id"</span>, <span class="st">"visit_occurrence_id"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="search-by-a-list-of-person_ids" class="level3" data-number="17.3.3">
<h3 data-number="17.3.3" class="anchored" data-anchor-id="search-by-a-list-of-person_ids"><span class="header-section-number">17.3.3</span> Search by a list of <code>person_ids</code>:</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a list of person_ids to search for</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>search_person_ids <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the data frame to only include rows with person_ids in the list</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>filtered_by_person_df <span class="ot">&lt;-</span> <span class="fu">subset</span>(full_df, person_id <span class="sc">%in%</span> search_person_ids)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="search-by-a-specific-condition-concept-code" class="level3" data-number="17.3.4">
<h3 data-number="17.3.4" class="anchored" data-anchor-id="search-by-a-specific-condition-concept-code"><span class="header-section-number">17.3.4</span> Search by a specific condition concept code:</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a specific condition concept code to search for</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>search_condition_concept_id <span class="ot">&lt;-</span> <span class="dv">1234567</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the data frame to only include rows with the specified condition concept code</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>filtered_by_condition_df <span class="ot">&lt;-</span> <span class="fu">subset</span>(full_df, condition_concept_id <span class="sc">==</span> search_condition_concept_id)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="search-by-a-date-range" class="level3" data-number="17.3.5">
<h3 data-number="17.3.5" class="anchored" data-anchor-id="search-by-a-date-range"><span class="header-section-number">17.3.5</span> Search by a date range:</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a date range to search for</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>start_date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-01-01"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>end_date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-12-31"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Filter the data frame to only include rows within the date range</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>filtered_by_date_df <span class="ot">&lt;-</span> <span class="fu">subset</span>(full_df, visit_start_date <span class="sc">&gt;=</span> start_date <span class="sc">&amp;</span> visit_start_date <span class="sc">&lt;=</span> end_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!--TBD
## Analysis with Python 

### Required Python Libraries:

To execute the Python queries, you'll need to install the pandas library. -->
<div style="text-align: right">
<a href="#table-of-contents">Back to Table of Contents</a>
</div>
<!--- WIP 

# OMOP ETL Process: Common Problems and Solutions

## Design and Planning
| Problem | Suggestion |
| ------- | ---------- |
| Different Coding Schemes in Databases | Standardize structures, conventions, and content during ETL to align different coding schemes. |
| Designing ETL with Expert Collaboration | Collaborate between data and CDM experts for efficient design. |
| Inadequate Source Data Documentation | Use White Rabbit to scan and understand source data thoroughly. |
| Mapping Source Data to CDM | Use Rabbit-in-a-Hat tool for interactive mapping and documentation. |
| Mapping Non-OMOP Coding Systems | Focus on frequently used codes and utilize existing mappings where possible. |
| Handling Post Coordinated SNOMED Codes | Address challenges with codes or conditions occurring multiple times. |
| Integration of New Data Sources | Develop a flexible ETL process to integrate new data sources. |
| Handling Various Data Formats | Create processes to handle different data formats effectively. |
| Custom Code Development for ETL | Develop custom code when necessary for specific ETL requirements. |
| Adapting to CDM Updates | Adapt ETL processes to accommodate updates in the CDM. |

## Implementation and Technology
| Problem | Suggestion |
| ------- | ---------- |
| ETL Implementation | Utilize existing code and community resources for efficient ETL process implementation. |
| Choosing ETL Implementation Technology | Select technology based on site expertise (SQL, SAS, C#, Java, etc.). |
| Data Transformation Logic | Clearly define and document the logic for data transformations. |
| ETL Performance Optimization | Continuously monitor and optimize ETL performance. |
| Scalability of ETL Processes | Ensure that ETL processes are scalable to accommodate growing data. |
| Data Mapping Complexities | Address complexities in mapping data from various sources to the CDM. |
| Updating and Maintenance of ETL Scripts | Regularly update and maintain ETL scripts for consistency. |
| Managing ETL Dependencies | Identify and manage dependencies in the ETL process. |
| Cross-Database Compatibility | Ensure compatibility of ETL processes across different databases. |
| Optimizing Data Load Processes | Optimize data load processes to enhance performance. |

## Data Quality and Security
| Problem | Suggestion |
| ------- | ---------- |
| Data Quality Issues | Implement thorough quality control measures to ensure data integrity. |
| Large Dataset Handling | Optimize ETL processes for handling large datasets efficiently. |
| Missing or Incomplete Data | Develop strategies to handle missing or incomplete data elements. |
| Handling Data Anomalies | Develop procedures to identify and resolve data anomalies. |
| Data Security and Compliance | Maintain strict adherence to data security and compliance standards. |
| Data Validation Processes | Implement robust data validation processes to ensure accuracy. |
| Error Handling in ETL Process | Develop comprehensive error handling mechanisms. |
| Source Data Version Control | Maintain version control for source data to track changes. |
| Data Cleansing Procedures | Establish data cleansing procedures to improve data quality. |
| Complex Transformation Rules | Manage complex transformation rules efficiently. |

## Operational Management
| Problem | Suggestion |
| ------- | ---------- |
| Automation of ETL Processes | Explore opportunities to automate repetitive ETL tasks. |
| Resource Allocation for ETL Tasks | Allocate sufficient resources for ETL tasks. |
| Maintaining Data Lineage | Keep track of data lineage throughout the ETL process. |
| Balancing ETL Speed and Accuracy | Balance the need for speed with accuracy in ETL processes. |
| Training for ETL Team | Provide comprehensive training for the ETL team. |
| Standardizing ETL Practices | Standardize ETL practices across various projects. |
| Monitoring ETL Processes | Implement monitoring tools to oversee ETL processes. |
| Dealing with Data Duplication | Develop strategies to handle data duplication issues. |
| Dynamic Data Source Integration | Integrate dynamic data sources effectively into the ETL process. |
| Data Transformation Standardization | Standardize data transformation rules across different datasets. |
| Collaboration and Communication | Foster collaboration and communication among all stakeholders involved in the ETL process. | 
-->
<div class="sourceCode" id="cb8"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## Markdown Content for GitHub Tutorial</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu"># Tutorial for Analyzing Type 2 Diabetes First Occurrence in OMOP CDM Data</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>This tutorial demonstrates how to create a flat file that consolidates information for each <span class="in">`person_id`</span> based on the first occurrence of type 2 diabetes (standard concept ID 201826) using various data analysis tools: SQL, SAS, R, Stata, and SPSS.</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>Remember to adjust file paths and variable specifics according to your dataset.</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="fu">## SQL</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="fu">### Loading Data</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>Assuming the data are already loaded into a SQL database.</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="fu">### SQL Query</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="in">```sql</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    p<span class="ch">.</span><span class="op">*</span>,</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    vo<span class="ch">.</span><span class="op">*</span>,</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    co<span class="ch">.</span>condition_occurrence_id,</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    de<span class="ch">.</span>drug_exposure_id,</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    m<span class="ch">.</span>measurement_id</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    person p</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    condition_occurrence co <span class="kw">ON</span> p<span class="ch">.</span>person_id <span class="op">=</span> co<span class="ch">.</span>person_id</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>    visit_occurrence vo <span class="kw">ON</span> co<span class="ch">.</span>visit_occurrence_id <span class="op">=</span> vo<span class="ch">.</span>visit_occurrence_id</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>    drug_exposure de <span class="kw">ON</span> p<span class="ch">.</span>person_id <span class="op">=</span> de<span class="ch">.</span>person_id <span class="kw">AND</span> vo<span class="ch">.</span>visit_occurrence_id <span class="op">=</span> de<span class="ch">.</span>visit_occurrence_id</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>    measurement m <span class="kw">ON</span> p<span class="ch">.</span>person_id <span class="op">=</span> m<span class="ch">.</span>person_id <span class="kw">AND</span> vo<span class="ch">.</span>visit_occurrence_id <span class="op">=</span> m<span class="ch">.</span>visit_occurrence_id</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    co<span class="ch">.</span>condition_concept_id <span class="op">=</span> <span class="dv">201826</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a><span class="kw">AND</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>    co<span class="ch">.</span>condition_start_date <span class="op">=</span> (</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>        <span class="kw">SELECT</span> <span class="fu">MIN</span>(condition_start_date)</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>        <span class="kw">FROM</span> condition_occurrence</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>        <span class="kw">WHERE</span> person_id <span class="op">=</span> co<span class="ch">.</span>person_id <span class="kw">AND</span> condition_concept_id <span class="op">=</span> <span class="dv">201826</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    p<span class="ch">.</span>person_id;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="sas" class="level2" data-number="17.4">
<h2 data-number="17.4" class="anchored" data-anchor-id="sas"><span class="header-section-number">17.4</span> SAS</h2>
<section id="loading-data" class="level3" data-number="17.4.1">
<h3 data-number="17.4.1" class="anchored" data-anchor-id="loading-data"><span class="header-section-number">17.4.1</span> Loading Data</h3>
<pre class="sas"><code>libname mydata '/path/to/csv/files';

proc import datafile="/path/to/csv/person.csv" 
    out=mydata.person 
    dbms=csv 
    replace;
run;

… [Repeat for other CSV files]</code></pre>
</section>
<section id="sas-code" class="level3" data-number="17.4.2">
<h3 data-number="17.4.2" class="anchored" data-anchor-id="sas-code"><span class="header-section-number">17.4.2</span> SAS Code</h3>
<pre class="sas"><code>proc sql;
    create table first_diabetes_visit as
    select
        p.*,
        vo.*,
        co.condition_occurrence_id,
        de.drug_exposure_id,
        m.measurement_id
    from
        mydata.person p
    inner join
        mydata.condition_occurrence co on p.person_id = co.person_id
    inner join
        mydata.visit_occurrence vo on co.visit_occurrence_id = vo.visit_occurrence_id
    left join
        mydata.drug_exposure de on p.person_id = de.person_id and vo.visit_occurrence_id = de.visit_occurrence_id
    left join
        mydata.measurement m on p.person_id = m.person_id and vo.visit_occurrence_id = m.visit_occurrence_id
    where
        co.condition_concept_id = 201826
    and
        co.condition_start_date = (
            select min(condition_start_date)
            from mydata.condition_occurrence
            where person_id = co.person_id and condition_concept_id = 201826
        )
    group by
        p.person_id;
quit;</code></pre>
</section>
</section>
<section id="r" class="level2" data-number="17.5">
<h2 data-number="17.5" class="anchored" data-anchor-id="r"><span class="header-section-number">17.5</span> R</h2>
<section id="loading-data-1" class="level3" data-number="17.5.1">
<h3 data-number="17.5.1" class="anchored" data-anchor-id="loading-data-1"><span class="header-section-number">17.5.1</span> Loading Data</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>person <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"path/to/csv/person.csv"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>visit_occurrence <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"path/to/csv/visit_occurrence.csv"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>condition_occurrence <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"path/to/csv/condition_occurrence.csv"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>drug_exposure <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"path/to/csv/drug_exposure.csv"</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>measurement <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"path/to/csv/measurement.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="r-code" class="level3" data-number="17.5.2">
<h3 data-number="17.5.2" class="anchored" data-anchor-id="r-code"><span class="header-section-number">17.5.2</span> R Code</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>first_diabetes_visit <span class="ot">&lt;-</span> condition_occurrence <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(condition_concept_id <span class="sc">==</span> <span class="dv">201826</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(person_id) <span class="sc">%&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">first_diagnosis_date =</span> <span class="fu">min</span>(condition_start_date)) <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(visit_occurrence, <span class="at">by =</span> <span class="st">"person_id"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(person, <span class="at">by =</span> <span class="st">"person_id"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(drug_exposure, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"person_id"</span>, <span class="st">"visit_occurrence_id"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(measurement, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"person_id"</span>, <span class="st">"visit_occurrence_id"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(condition_start_date <span class="sc">==</span> first_diagnosis_date)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(first_diabetes_visit, <span class="st">"first_diabetes_visit.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="stata" class="level2" data-number="17.6">
<h2 data-number="17.6" class="anchored" data-anchor-id="stata"><span class="header-section-number">17.6</span> Stata</h2>
<section id="loading-data-2" class="level3" data-number="17.6.1">
<h3 data-number="17.6.1" class="anchored" data-anchor-id="loading-data-2"><span class="header-section-number">17.6.1</span> Loading Data</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>import delimited <span class="st">"path/to/csv/person.csv"</span>, <span class="kw">clear</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> person, <span class="kw">replace</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>… [Repeat <span class="kw">for</span> other CSV files]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="stata-code" class="level3" data-number="17.6.2">
<h3 data-number="17.6.2" class="anchored" data-anchor-id="stata-code"><span class="header-section-number">17.6.2</span> Stata Code</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>Assuming <span class="kw">data</span> are already loaded and named appropriately</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">merge</span> 1:1 person_id <span class="kw">using</span> condition_occurrence</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="kw">merge</span> 1:1 person_id <span class="kw">using</span> visit_occurrence</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="kw">merge</span> 1:1 person_id <span class="kw">using</span> drug_exposure</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="kw">merge</span> 1:1 person_id <span class="kw">using</span> measurement</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>Filtering <span class="kw">for</span> first occurrence <span class="kw">of</span> <span class="dv">type</span> 2 diabetes</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> min_date = <span class="fu">min</span>(<span class="fu">cond</span>(condition_concept_id == 201826, condition_start_date, .)), <span class="kw">by</span>(person_id</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> condition_start_date == min_date</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>Exporting the dataset</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="kw">export</span> delimited <span class="kw">using</span> <span class="st">"first_diabetes_visit.csv"</span>, <span class="kw">replace</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="spss" class="level2" data-number="17.7">
<h2 data-number="17.7" class="anchored" data-anchor-id="spss"><span class="header-section-number">17.7</span> SPSS</h2>
<section id="loading-data-3" class="level3" data-number="17.7.1">
<h3 data-number="17.7.1" class="anchored" data-anchor-id="loading-data-3"><span class="header-section-number">17.7.1</span> Loading Data</h3>
<pre class="spss"><code>GET DATA
  /TYPE=TXT
  /FILE='path/to/csv/person.csv'
  /DELCASE=LINE
  /DELIMITERS=","
  /ARRANGEMENT=DELIMITED
  /FIRSTCASE=2
  /VARIABLES=
  … [Variable names and types]
CACHE.
EXECUTE.

… [Repeat for other CSV files]</code></pre>
</section>
<section id="spss-code" class="level3" data-number="17.7.2">
<h3 data-number="17.7.2" class="anchored" data-anchor-id="spss-code"><span class="header-section-number">17.7.2</span> SPSS Code</h3>
<pre class="spss"><code>MATCH FILES
  /FILE=*
  /TABLE='condition_occurrence'
  /BY person_id.
MATCH FILES
  /FILE=*
  /TABLE='visit_occurrence'
  /BY person_id.
MATCH FILES
  /FILE=*
  /TABLE='drug_exposure'
  /BY person_id.
MATCH FILES
  /FILE=*
  /TABLE='measurement'
  /BY person_id.

Filtering for first occurrence of type 2 diabetes.
AGGREGATE OUTFILE=* MODE=ADDVARIABLES OVERWRITE=YES
/BREAK=person_id
/first_diagnosis_date=MIN(condition_start_date (condition_concept_id = 201826)).

SELECT IF condition_start_date = first_diagnosis_date.

Exporting the dataset.
SAVE OUTFILE='path/to/output/first_diabetes_visit.sav'.</code></pre>
</section>
</section>
<section id="python" class="level2" data-number="17.8">
<h2 data-number="17.8" class="anchored" data-anchor-id="python"><span class="header-section-number">17.8</span> Python</h2>
<section id="loading-data-4" class="level3" data-number="17.8.1">
<h3 data-number="17.8.1" class="anchored" data-anchor-id="loading-data-4"><span class="header-section-number">17.8.1</span> Loading Data</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>person <span class="op">=</span> pd.read_csv(<span class="st">'path/to/csv/person.csv'</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>visit_occurrence <span class="op">=</span> pd.read_csv(<span class="st">'path/to/csv/visit_occurrence.csv'</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>condition_occurrence <span class="op">=</span> pd.read_csv(<span class="st">'path/to/csv/condition_occurrence.csv'</span>)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>drug_exposure <span class="op">=</span> pd.read_csv(<span class="st">'path/to/csv/drug_exposure.csv'</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>measurement <span class="op">=</span> pd.read_csv(<span class="st">'path/to/csv/measurement.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="python-code" class="level3" data-number="17.8.2">
<h3 data-number="17.8.2" class="anchored" data-anchor-id="python-code"><span class="header-section-number">17.8.2</span> Python Code</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>Filtering <span class="cf">for</span> first occurrence of <span class="bu">type</span> <span class="dv">2</span> diabetes</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>first_diagnosis <span class="op">=</span> condition_occurrence[condition_occurrence[<span class="st">'condition_concept_id'</span>] <span class="op">==</span> <span class="dv">201826</span>]</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>first_diagnosis <span class="op">=</span> first_diagnosis.groupby(<span class="st">'person_id'</span>)[<span class="st">'condition_start_date'</span>].<span class="bu">min</span>().reset_index()</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>Merging <span class="cf">with</span> other dataframes</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> first_diagnosis.merge(visit_occurrence, on<span class="op">=</span><span class="st">'person_id'</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> merged_data.merge(person, on<span class="op">=</span><span class="st">'person_id'</span>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> merged_data.merge(drug_exposure, on<span class="op">=</span>[<span class="st">'person_id'</span>, <span class="st">'visit_occurrence_id'</span>], how<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> merged_data.merge(measurement, on<span class="op">=</span>[<span class="st">'person_id'</span>, <span class="st">'visit_occurrence_id'</span>], how<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>Filtering to keep only records corresponding to the first diabetes diagnosis</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> merged_data[merged_data[<span class="st">'condition_start_date'</span>] <span class="op">==</span> merged_data[<span class="st">'first_diagnosis_date'</span>]]</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>Exporting the dataset</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>merged_data.to_csv(<span class="st">'first_diabetes_visit.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>```</p>
</section>
<section id="sample-ohdsi-network-study-table" class="level3" data-number="17.8.3">
<h3 data-number="17.8.3" class="anchored" data-anchor-id="sample-ohdsi-network-study-table"><span class="header-section-number">17.8.3</span> SAMPLE OHDSI Network Study TABLE</h3>
<section id="study-information" class="level4" data-number="17.8.3.1">
<h4 data-number="17.8.3.1" class="anchored" data-anchor-id="study-information"><span class="header-section-number">17.8.3.1</span> Study Information</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 16%">
<col style="width: 84%">
</colgroup>
<thead>
<tr class="header">
<th>Element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Study Title</strong></td>
<td>Creation and Evaluation of XX Across Different Database Sources</td>
</tr>
<tr class="even">
<td><strong>Study Status</strong></td>
<td>Study Status: Started</td>
</tr>
<tr class="odd">
<td><strong>Next Steps</strong></td>
<td>Generate the 8 phenotypes on multiple external OMOP CDMs (at least 1 claims and 1 EHR based CDMs) and run Phevaluator on external CDMs</td>
</tr>
<tr class="even">
<td><strong>Research Question</strong></td>
<td>How do XXX phenotypes perform across different data sources (EHR, claims, registries) that may have differences in how the OMOP ETL was performed?</td>
</tr>
<tr class="odd">
<td><strong>Uncertainty</strong></td>
<td>We remain uncertain as to how our phenotypes will perform across other database types (claims, other EHR, etc).</td>
</tr>
<tr class="even">
<td><strong>Study type</strong></td>
<td>Clinical Application.</td>
</tr>
<tr class="odd">
<td><strong>Tags</strong></td>
<td>OHDSI XXX</td>
</tr>
<tr class="even">
<td><strong>Study lead</strong></td>
<td>Dr.&nbsp;XXX</td>
</tr>
<tr class="odd">
<td><strong>Study lead forums tag</strong></td>
<td>N/A (The OHDSI forums tag of the study lead, which can be used to contact the lead. It is recommended to make this a hyperlink to lead’s forums profile)</td>
</tr>
<tr class="even">
<td><strong>Study team</strong></td>
<td>XXX, XXX, XXX</td>
</tr>
<tr class="odd">
<td><strong>Phenotype Development</strong></td>
<td>Created and tested X# phenotypes with Phevaluator using XXX Institution OMOP CDM</td>
</tr>
<tr class="even">
<td><strong>Phenotype Evaluation</strong></td>
<td>Currently under development process. This is the purpose of the study</td>
</tr>
<tr class="odd">
<td><strong>Cohort Definitions</strong></td>
<td>XXX Phenotype Cohort IDs (ATLAS Demo): #, #, #</td>
</tr>
<tr class="even">
<td><strong>Cohort Diagnostics</strong></td>
<td>Currently under development process. (A hyperlink to the R Shiny app where the cohort diagnostics results can be viewed.)</td>
</tr>
<tr class="odd">
<td><strong>Analysis Specifications</strong></td>
<td>Develop a OHDSI protocol to run a multi-centric patient level prediction study on complication comparisons among different drug use for XX patients.</td>
</tr>
<tr class="even">
<td><strong>HADES Packages</strong></td>
<td>ROhdsiWebApi, DatabaseConnecter, CohortDiagnostics, Phevaluator</td>
</tr>
<tr class="odd">
<td><strong>Study Sites</strong></td>
<td>Pending, but likely to include X, X, X, and other datasources accessed through XX</td>
</tr>
<tr class="even">
<td><strong>Results explorer</strong></td>
<td>N/A</td>
</tr>
<tr class="odd">
<td><strong>Study start date</strong></td>
<td>July 9, 2024</td>
</tr>
<tr class="even">
<td><strong>Study end date</strong></td>
<td>Not complete yet</td>
</tr>
<tr class="odd">
<td><strong>Protocol</strong></td>
<td>See documents directory</td>
</tr>
<tr class="even">
<td><strong>Publications</strong></td>
<td>N/A (Zero, one or more hyperlinks to papers produced as part of the study (comma-separated).)</td>
</tr>
</tbody>
</table>
</section>
<section id="study-progress" class="level4" data-number="17.8.3.2">
<h4 data-number="17.8.3.2" class="anchored" data-anchor-id="study-progress"><span class="header-section-number">17.8.3.2</span> Study Progress</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 80%">
<col style="width: 19%">
</colgroup>
<thead>
<tr class="header">
<th>Study Attribute</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>IRB materials sufficient for review</strong></td>
<td>Yes</td>
</tr>
<tr class="even">
<td><strong>Cohort definition(s) available</strong></td>
<td>Yes</td>
</tr>
<tr class="odd">
<td><strong>Data partner recruitment status</strong></td>
<td>Ready</td>
</tr>
<tr class="even">
<td><strong>Deadline for adding new data partners</strong></td>
<td>N/A</td>
</tr>
<tr class="odd">
<td><strong>Protocol building team recruitment status</strong></td>
<td>Ready</td>
</tr>
<tr class="even">
<td><strong>Deadline for adding new protocol building team members</strong></td>
<td>N/A</td>
</tr>
<tr class="odd">
<td><strong>Manuscript preparation team recruitment status</strong></td>
<td>Ready</td>
</tr>
<tr class="even">
<td><strong>Deadline for adding new manuscript preparation team members</strong></td>
<td>N/A</td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>